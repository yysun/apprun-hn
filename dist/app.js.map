{"version":3,"sources":["webpack://apprun-hn/webpack/bootstrap","webpack://apprun-hn/webpack/runtime/global","webpack://apprun-hn/./node_modules/apprun/dist/apprun.esm.js","webpack://apprun-hn/./src/api.ts","webpack://apprun-hn/./src/app.tsx"],"names":["__webpack_require__","g","globalThis","this","Function","e","window","t","_events","n","push","fn","options","filter","console","assert","length","once","forEach","i","s","delay","apply","on","Object","assign","_t","clearTimeout","setTimeout","self","global","app","_AppRunVersions","o","Array","isArray","map","r","tag","getPrototypeOf","props","children","c","h","id","Date","now","u","mount","l","state","mounted","Promise","element","all","then","setState","ref","_component","_view","renderState","WeakMap","_op","nodeName","toUpperCase","a","parentNode","replaceChild","f","childNodes","Math","min","textContent","nodeType","nodeValue","HTMLElement","SVGElement","insertBefore","key","nextSibling","appendChild","removeChild","lastChild","document","createDocumentFragment","indexOf","createElement","insertAdjacentHTML","substring","createTextNode","JSON","stringify","createElementNS","_props","class","className","keys","startsWith","replace","dataset","style","cssText","toLowerCase","removeAttributeNS","setAttributeNS","setAttribute","removeAttribute","test","getAttribute","requestAnimationFrame","p","super","observedAttributes","isConnected","_shadowRoot","shadow","attachShadow","mode","reduce","_attrMap","from","attributes","name","value","defineProperty","get","attributeChangedCallback","configurable","enumerable","parentElement","dispatchEvent","bind","run","render","unload","call","unmount","b","customElements","define","y","meta","has","set","v","j","O","components","k","_","view","update","_app","_actions","_global_events","_history","_history_idx","_history_prev","history","_history_next","start","type","checked","onclick","target","oninput","Number","onchange","multiple","selected","innerHTML","component","debug","vdom","el","getElementById","tracking_id","valueOf","toString","MutationObserver","observer","oldValue","body","contains","disconnect","observe","childList","subtree","attributeOldValue","attributeFilter","rendered","_state","catch","error","enable_history","callback","global_event","prev","next","route","add_actions","model","event","current_state","newState","getMetadataKeys","getMetadata","split","trim","add_action","is_global_event","off","$","Error","Fragment","webComponent","x","addEventListener","onpopstate","location","hash","Component","React","defineMetadata","customElement","firebase","initializeApp","databaseURL","db","database","fetch","async","path","child","resolve","snapshot","val","getItem","item","kids","deleted","dead","kid","getList","max","items","idx","Comment","comment","by","timeAgo","time","text","Comments","list","num","pluralize","Item","href","url","title","score","descendants","back","ListItem","item_link","List","number","label","between","matches","classList","toggle","nextElementSibling"],"mappings":"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","file":"app.js","sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","class t{constructor(){this._events={}}on(t,e,n={}){this._events[t]=this._events[t]||[],this._events[t].push({fn:e,options:n})}off(t,e){const n=this._events[t]||[];this._events[t]=n.filter(t=>t.fn!==e)}find(t){return this._events[t]}run(t,...e){const n=this._events[t]||[];return console.assert(n&&n.length>0,\"No subscriber for event: \"+t),this._events[t]=n.filter(t=>!t.options.once),n.forEach(n=>{const{fn:i,options:s}=n;return s.delay?this.delay(t,i,e,s):i.apply(this,e),!n.options.once}),n.length}once(t,e,n={}){this.on(t,e,Object.assign(Object.assign({},n),{once:!0}))}delay(t,e,n,i){i._t&&clearTimeout(i._t),i._t=setTimeout(()=>{clearTimeout(i._t),e.apply(this,n)},i.delay)}}let e;const n=\"object\"==typeof self&&self.self===self&&self||\"object\"==typeof global&&global.global===global&&global;n.app&&n._AppRunVersions?e=n.app:(e=new t,n.app=e,n._AppRunVersions=\"AppRun-2\");var i=e;function s(t,e,n=0){var o;if(\"string\"==typeof t)return t;if(Array.isArray(t))return t.map(t=>s(t,e,n++));let r=t;if(t&&\"function\"==typeof t.tag&&Object.getPrototypeOf(t.tag).t&&(r=function(t,e,n){const{tag:s,props:o,children:r}=t;let c=\"_\"+n,h=o&&o.id;h?c=h:h=`_${n}${Date.now()}`,e.i||(e.i={});let u=e.i[c];u&&u instanceof s||(u=e.i[c]=new s(Object.assign(Object.assign({},o),{children:r})).mount(h));let l=u.state;if(u.mounted){const t=u.mounted(o,r,u.state);l=void 0!==t?t:u.state}if(l instanceof Promise){const t=t=>{u.element=t,Promise.all([l]).then(t=>{t[0]?u.setState(t[0]):u.setState(u.state)})};return i.h(\"section\",Object.assign({},o,{ref:e=>t(e),_component:u}))}if(null!=l){const t=u._view(l,o),e=e=>{u.element=e,u.state=l,u.renderState(l,t)};return i.h(\"section\",Object.assign({},o,{ref:t=>e(t),_component:u}),t)}return i.h(\"section\",Object.assign({},o,{_component:u}))}(t,e,n)),r&&Array.isArray(r.children)){const t=null===(o=r.props)||void 0===o?void 0:o._component;if(t){let e=0;r.children=r.children.map(n=>s(n,t,e++))}else r.children=r.children.map(t=>s(t,e,n++))}return r}function o(t){const e=[],n=t=>{null!=t&&\"\"!==t&&!1!==t&&e.push(\"function\"==typeof t||\"object\"==typeof t?t:\"\"+t)};return t&&t.forEach(t=>{Array.isArray(t)?t.forEach(t=>n(t)):n(t)}),e}const r=new WeakMap,c=function(t,e,n={}){if(null==e||!1===e)return;e=s(e,n);const i=\"SVG\"===(null==t?void 0:t.nodeName);if(!t)return;Array.isArray(e)?u(t,e,i):u(t,[e],i)};function h(t,e,n){3!==e._op&&(n=n||\"svg\"===e.tag,!function(t,e){const n=t.nodeName,i=\"\"+(e.tag||\"\");return n.toUpperCase()===i.toUpperCase()}(t,e)?t.parentNode.replaceChild(f(e,n),t):(!(2&e._op)&&u(t,e.children,n),!(1&e._op)&&a(t,e.props,n)))}function u(t,e,n){var i;const s=(null===(i=t.childNodes)||void 0===i?void 0:i.length)||0,o=(null==e?void 0:e.length)||0,c=Math.min(s,o);for(let i=0;i<c;i++){const s=e[i];if(3===s._op)continue;const o=t.childNodes[i];if(\"string\"==typeof s)o.textContent!==s&&(3===o.nodeType?o.nodeValue=s:t.replaceChild(l(s),o));else if(s instanceof HTMLElement||s instanceof SVGElement)t.insertBefore(s,o);else{const e=s.props&&s.props.key;if(e)if(o.key===e)h(t.childNodes[i],s,n);else{const c=r[e];if(c){const e=c.nextSibling;t.insertBefore(c,o),e?t.insertBefore(o,e):t.appendChild(o)}h(t.childNodes[i],s,n)}else h(t.childNodes[i],s,n)}}let u=t.childNodes.length;for(;u>c;)t.removeChild(t.lastChild),u--;if(o>c){const i=document.createDocumentFragment();for(let t=c;t<e.length;t++)i.appendChild(f(e[t],n));t.appendChild(i)}}function l(t){if(0===t.indexOf(\"_html:\")){const e=document.createElement(\"div\");return e.insertAdjacentHTML(\"afterbegin\",t.substring(6)),e}return document.createTextNode(t)}function f(t,e){if(t instanceof HTMLElement||t instanceof SVGElement)return t;if(\"string\"==typeof t)return l(t);if(!t.tag||\"function\"==typeof t.tag)return l(JSON.stringify(t));const n=(e=e||\"svg\"===t.tag)?document.createElementNS(\"http://www.w3.org/2000/svg\",t.tag):document.createElement(t.tag);return a(n,t.props,e),t.children&&t.children.forEach(t=>n.appendChild(f(t,e))),n}function a(t,e,n){const i=t._props||{};e=function(t,e){e.class=e.class||e.className,delete e.className;const n={};return t&&Object.keys(t).forEach(t=>n[t]=null),e&&Object.keys(e).forEach(t=>n[t]=e[t]),n}(i,e||{}),t._props=e;for(const i in e){const s=e[i];if(i.startsWith(\"data-\")){const e=i.substring(5).replace(/-(\\w)/g,t=>t[1].toUpperCase());t.dataset[e]!==s&&(s||\"\"===s?t.dataset[e]=s:delete t.dataset[e])}else if(\"style\"===i)if(t.style.cssText&&(t.style.cssText=\"\"),\"string\"==typeof s)t.style.cssText=s;else for(const e in s)t.style[e]!==s[e]&&(t.style[e]=s[e]);else if(i.startsWith(\"xlink\")){const e=i.replace(\"xlink\",\"\").toLowerCase();null==s||!1===s?t.removeAttributeNS(\"http://www.w3.org/1999/xlink\",e):t.setAttributeNS(\"http://www.w3.org/1999/xlink\",e,s)}else i.startsWith(\"on\")?s&&\"function\"!=typeof s?\"string\"==typeof s&&(s?t.setAttribute(i,s):t.removeAttribute(i)):t[i]=s:/^id$|^class$|^list$|^readonly$|^contenteditable$|^role|-/g.test(i)||n?t.getAttribute(i)!==s&&(s?t.setAttribute(i,s):t.removeAttribute(i)):t[i]!==s&&(t[i]=s);\"key\"===i&&s&&(r[s]=t)}e&&\"function\"==typeof e.ref&&window.requestAnimationFrame(()=>e.ref(t))}function d(t,...e){return o(e)}const p=(t,e={})=>class extends HTMLElement{constructor(){super()}get component(){return this._component}get state(){return this._component.state}static get observedAttributes(){return(e.observedAttributes||[]).map(t=>t.toLowerCase())}connectedCallback(){if(this.isConnected&&!this._component){const n=e||{};this._shadowRoot=n.shadow?this.attachShadow({mode:\"open\"}):this;const i=n.observedAttributes||[],s=i.reduce((t,e)=>{const n=e.toLowerCase();return n!==e&&(t[n]=e),t},{});this._attrMap=t=>s[t]||t;const o={};Array.from(this.attributes).forEach(t=>o[this._attrMap(t.name)]=t.value),i.forEach(t=>{void 0!==this[t]&&(o[t]=this[t]),Object.defineProperty(this,t,{get:()=>o[t],set(e){this.attributeChangedCallback(t,o[t],e)},configurable:!0,enumerable:!0})});const r=this.children?Array.from(this.children):[];if(r.forEach(t=>t.parentElement.removeChild(t)),this._component=new t(Object.assign(Object.assign({},o),{children:r})).mount(this._shadowRoot,n),this._component._props=o,this._component.dispatchEvent=this.dispatchEvent.bind(this),this._component.mounted){const t=this._component.mounted(o,r,this._component.state);void 0!==t&&(this._component.state=t)}this.on=this._component.on.bind(this._component),this.run=this._component.run.bind(this._component),!1!==n.render&&this._component.run(\".\")}}disconnectedCallback(){var t,e,n,i;null===(e=null===(t=this._component)||void 0===t?void 0:t.unload)||void 0===e||e.call(t),null===(i=null===(n=this._component)||void 0===n?void 0:n.unmount)||void 0===i||i.call(n),this._component=null}attributeChangedCallback(t,n,i){if(this._component){const s=this._attrMap(t);this._component._props[s]=i,this._component.run(\"attributeChanged\",s,n,i),i!==n&&!1!==e.render&&window.requestAnimationFrame(()=>{this._component.run(\".\")})}}};var b=(t,e,n)=>{\"undefined\"!=typeof customElements&&customElements.define(t,p(e,n))};const y={meta:new WeakMap,defineMetadata(t,e,n){this.meta.has(n)||this.meta.set(n,{}),this.meta.get(n)[t]=e},getMetadataKeys(t){return t=Object.getPrototypeOf(t),this.meta.get(t)?Object.keys(this.meta.get(t)):[]},getMetadata(t,e){return e=Object.getPrototypeOf(e),this.meta.get(e)?this.meta.get(e)[t]:null}};function m(t,e={}){return(n,i,s)=>{const o=t?t.toString():i;return y.defineMetadata(\"apprun-update:\"+o,{name:o,key:i,options:e},n),s}}function g(t,e={}){return function(n,i){const s=t?t.toString():i;y.defineMetadata(\"apprun-update:\"+s,{name:s,key:i,options:e},n)}}function w(t,e){return function(n){return b(t,n,e),n}}const v=(t,e)=>(e?t.state[e]:t.state)||\"\",j=(t,e,n)=>{if(e){const i=t.state||{};i[e]=n,t.setState(i)}else t.setState(n)};const O={};i.on(\"get-components\",t=>t.components=O);const k=t=>t;class _{constructor(e,n,i,s){this.state=e,this.view=n,this.update=i,this.options=s,this._app=new t,this._actions=[],this._global_events=[],this._history=[],this._history_idx=-1,this._history_prev=()=>{this._history_idx--,this._history_idx>=0?this.setState(this._history[this._history_idx],{render:!0,history:!1}):this._history_idx=0},this._history_next=()=>{this._history_idx++,this._history_idx<this._history.length?this.setState(this._history[this._history_idx],{render:!0,history:!1}):this._history_idx=this._history.length-1},this.start=(t=null,e)=>this.mount(t,Object.assign(Object.assign({},e),{render:!0}))}render(t,e){i.render(t,e,this)}_view(t,e=null){if(!this.view)return;const n=i.createElement;i.h=i.createElement=(t,e,...s)=>(e&&Object.keys(e).forEach(n=>{n.startsWith(\"$\")&&(((t,e,n,s)=>{if(t.startsWith(\"$on\")){const n=e[t];if(t=t.substring(1),\"boolean\"==typeof n)e[t]=e=>s.run(t,e);else if(\"string\"==typeof n)e[t]=t=>s.run(n,t);else if(\"function\"==typeof n)e[t]=t=>s.setState(n(s.state,t));else if(Array.isArray(n)){const[i,...o]=n;\"string\"==typeof i?e[t]=t=>s.run(i,...o,t):\"function\"==typeof i&&(e[t]=t=>s.setState(i(s.state,...o,t)))}}else if(\"$bind\"===t){const i=e.type||\"text\",o=\"string\"==typeof e[t]?e[t]:e.name;if(\"input\"===n)switch(i){case\"checkbox\":e.checked=v(s,o),e.onclick=t=>j(s,o||t.target.name,t.target.checked);break;case\"radio\":e.checked=v(s,o)===e.value,e.onclick=t=>j(s,o||t.target.name,t.target.value);break;case\"number\":case\"range\":e.value=v(s,o),e.oninput=t=>j(s,o||t.target.name,Number(t.target.value));break;default:e.value=v(s,o),e.oninput=t=>j(s,o||t.target.name,t.target.value)}else\"select\"===n?(e.value=v(s,o),e.onchange=t=>{t.target.multiple||j(s,o||t.target.name,t.target.value)}):\"option\"===n?(e.selected=v(s,o),e.onclick=t=>j(s,o||t.target.name,t.target.selected)):\"textarea\"===n&&(e.innerHTML=v(s,o),e.oninput=t=>j(s,o||t.target.name,t.target.value))}else i.run(\"$\",{key:t,tag:n,props:e,component:s})})(n,e,t,this),delete e[n])}),n(t,e,...s));const s=e?this.view(t,e):this.view(t);return i.h=i.createElement=n,s}renderState(t,e=null){if(!this.view)return;let n=e||this._view(t);if(i.debug&&i.run(\"debug\",{component:this,_:n?\".\":\"-\",state:t,vdom:n,el:this.element}),\"object\"!=typeof document)return;const s=\"string\"==typeof this.element?document.getElementById(this.element):this.element;if(s){const t=\"_c\";this.unload?s._component===this&&s.getAttribute(t)===this.tracking_id||(this.tracking_id=(new Date).valueOf().toString(),s.setAttribute(t,this.tracking_id),\"undefined\"!=typeof MutationObserver&&(this.observer||(this.observer=new MutationObserver(t=>{t[0].oldValue!==this.tracking_id&&document.body.contains(s)||(this.unload(this.state),this.observer.disconnect(),this.observer=null)})),this.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[t]}))):s.removeAttribute&&s.removeAttribute(t),s._component=this}e||this.render(s,n),this.rendered&&this.rendered(this.state)}setState(t,e={render:!0,history:!1}){if(t instanceof Promise)Promise.all([t,this._state]).then(t=>{t[0]&&this.setState(t[0])}).catch(t=>{throw console.error(t),t}),this._state=t;else{if(this._state=t,null==t)return;this.state=t,!1!==e.render&&this.renderState(t),!1!==e.history&&this.enable_history&&(this._history=[...this._history,t],this._history_idx=this._history.length-1),\"function\"==typeof e.callback&&e.callback(this.state)}}mount(t=null,e){var n,s;if(console.assert(!this.element,\"Component already mounted.\"),this.options=e=Object.assign(Object.assign({},this.options),e),this.element=t,this.global_event=e.global_event,this.enable_history=!!e.history,this.enable_history&&(this.on(e.history.prev||\"history-prev\",this._history_prev),this.on(e.history.next||\"history-next\",this._history_next)),e.route&&(this.update=this.update||{},this.update[e.route]=k),this.add_actions(),this.state=null!==(s=null!==(n=this.state)&&void 0!==n?n:this.model)&&void 0!==s?s:{},\"function\"==typeof this.state&&(this.state=this.state()),e.render?this.setState(this.state,{render:!0,history:!0}):this.setState(this.state,{render:!1,history:!0}),i.debug){const e=\"string\"==typeof t?t:t.id;O[e]=O[e]||[],O[e].push(this)}return this}is_global_event(t){return t&&(this.global_event||this._global_events.indexOf(t)>=0||t.startsWith(\"#\")||t.startsWith(\"/\")||t.startsWith(\"@\"))}add_action(t,e,n={}){e&&\"function\"==typeof e&&(n.global&&this._global_events.push(t),this.on(t,(...s)=>{i.debug&&i.run(\"debug\",{component:this,_:\">\",event:t,p:s,current_state:this.state,options:n});const o=e(this.state,...s);i.debug&&i.run(\"debug\",{component:this,_:\"<\",event:t,p:s,newState:o,state:this.state,options:n}),this.setState(o,n)},n))}add_actions(){const t=this.update||{};y.getMetadataKeys(this).forEach(e=>{if(e.startsWith(\"apprun-update:\")){const n=y.getMetadata(e,this);t[n.name]=[this[n.key].bind(this),n.options]}});const e={};Array.isArray(t)?t.forEach(t=>{const[n,i,s]=t;n.toString().split(\",\").forEach(t=>e[t.trim()]=[i,s])}):Object.keys(t).forEach(n=>{const i=t[n];(\"function\"==typeof i||Array.isArray(i))&&n.split(\",\").forEach(t=>e[t.trim()]=i)}),e[\".\"]||(e[\".\"]=k),Object.keys(e).forEach(t=>{const n=e[t];\"function\"==typeof n?this.add_action(t,n):Array.isArray(n)&&this.add_action(t,n[0],n[1])})}run(t,...e){const n=t.toString();return this.is_global_event(n)?i.run(n,...e):this._app.run(n,...e)}on(t,e,n){const s=t.toString();return this._actions.push({name:s,fn:e}),this.is_global_event(s)?i.on(s,e,n):this._app.on(s,e,n)}unmount(){var t;null===(t=this.observer)||void 0===t||t.disconnect(),this._actions.forEach(t=>{const{name:e,fn:n}=t;this.is_global_event(e)?i.off(e,n):this._app.off(e,n)})}}_.t=!0;const A=\"//\",M=\"///\",$=t=>{if(t||(t=\"#\"),t.startsWith(\"#\")){const[e,...n]=t.split(\"/\");i.run(e,...n)||i.run(\"///\",e,...n),i.run(\"//\",e,...n)}else if(t.startsWith(\"/\")){const[e,n,...s]=t.split(\"/\");i.run(\"/\"+n,...s)||i.run(\"///\",\"/\"+n,...s),i.run(\"//\",\"/\"+n,...s)}else i.run(t)||i.run(\"///\",t),i.run(\"//\",t)};i.h=i.createElement=function(t,e,...n){const i=o(n);if(\"string\"==typeof t)return{tag:t,props:e,children:i};if(Array.isArray(t))return t;if(void 0===t&&n)return i;if(Object.getPrototypeOf(t).t)return{tag:t,props:e,children:i};if(\"function\"==typeof t)return t(e,i);throw new Error(\"Unknown tag in vdom \"+t)},i.render=function(t,e,n){c(t,e,n)},i.Fragment=d,i.webComponent=b,i.start=(t,e,n,i,s)=>{const o=Object.assign(Object.assign({},s),{render:!0,global_event:!0}),r=new _(e,n,i);return s&&s.rendered&&(r.rendered=s.rendered),r.mount(t,o),r};const x=t=>{};i.on(\"$\",x),i.on(\"debug\",t=>x),i.on(\"//\",x),i.on(\"#\",x),i.route=$,i.on(\"route\",t=>i.route&&i.route(t)),\"object\"==typeof document&&document.addEventListener(\"DOMContentLoaded\",()=>{i.route===$&&(window.onpopstate=()=>$(location.hash),$(location.hash))}),\"object\"==typeof window&&(window.Component=_,window.React=i,window.on=g,window.customElement=w);export default i;export{_ as Component,d as Fragment,M as ROUTER_404_EVENT,A as ROUTER_EVENT,i as app,w as customElement,m as event,g as on,m as update};\n//# sourceMappingURL=apprun.esm.js.map\n","declare let firebase;\n\nfirebase.initializeApp({ databaseURL: 'https://hacker-news.firebaseio.com' });\nconst db = firebase.database().ref('/v0');\n\nconst fetch = async (path): Promise<any> => {\n  const ref = db.child(path);\n  return new Promise((resolve) => {\n    ref.once('value', snapshot => resolve(snapshot.val()));\n  })\n};\n\nexport const getItem = async (id): Promise<any> => {\n  const item = await fetch(`item/${id}`);\n  if (item && item.kids) {\n    item.kids = item.kids.filter(item => item && !item.deleted && !item.dead);\n    item.kids = await Promise.all(item.kids.map(async kid =>\n      typeof kid === 'number'\n        ? await getItem(kid)\n        : kid\n    ));\n  }\n  return item;\n};\n\nexport const getList = async (type, min, max) => {\n  let items = await fetch(`${type}stories`);\n  max = Math.min(max, items.length);\n  await Promise.all(items.map(async (id, idx) => {\n    if (idx >= min && idx < max && (typeof id === 'number'))\n      items[idx] = await fetch(`item/${id}`)\n    }\n  ));\n  return { items, min, max };\n};\n","import app from 'apprun';\nimport { getList, getItem } from './api';\n\nconst page_size = 30;\n\nconst Comment = ({ comment }) => {\n  if (!comment) return;\n  return <li className='comment'>\n    <div className='meta'>\n      <span>by {comment.by}</span> |&nbsp;\n      <span>{timeAgo(comment.time)} ago</span>\n    </div>\n    <div className='text'>{`_html:${comment.text}`}</div>\n    <Comments item={comment} />  {/* tslint:disable-line */}\n  </li>\n}\n\nconst Comments = ({ item }) => {\n  if (!item || !item.kids) return;\n  const list = item.kids;\n  const num = item.kids.length;\n  return <div>\n    {num && <div className='toggle'>{pluralize(num, ' comment')} </div>}\n    <ul className='comment-list'>\n      { list.map(comment => <Comment comment={comment} />)}\n    </ul>\n  </div>;\n}\n\nconst Item = ({ item }) => {\n  if (!item) return;\n  return <div className='story'>\n    <h4><a href={item.url} target=\"_blank\">{item.title}</a></h4>\n    {(item.text) && <div className='text'>{`_html:${item.text}`}</div>}\n    <div className='meta'>\n      <span>{pluralize(item.score, ' point')}</span> |&nbsp;\n        <span>by {item.by}</span> |&nbsp;\n        <span>{timeAgo(item.time)} ago</span> |&nbsp;\n        <span>{pluralize(item.descendants, ' comment')} (in total)  |&nbsp;</span>\n      <span><a onclick={() => history.back()}>back</a></span>\n    </div>\n    <Comments item={item} />\n  </div>\n}\n\nconst ListItem = ({ item, idx }) => {\n  if (!item) return;\n  const item_link = `#/item/${item.id}`;\n  return <li>\n    <div className={'score'}>{item.score}</div>\n    <div><a href={item.url || item_link} target=\"_blank\">{item.title}</a></div>\n    <div className='meta'>\n      <span>by {item.by}</span> |&nbsp;\n        <span>{timeAgo(item.time)} ago</span> |&nbsp;\n        <span><a href={`${item_link}`}>{pluralize(item.descendants, ' comment')}</a></span>\n    </div>\n  </li>\n}\n\nconst List = ({ list }) => {\n  if (!list || !list.items) return;\n  return <div>\n    <ul className='story-list'> {\n      list.items.filter((item, i) => i >= list.min && i < list.max && (typeof item !== 'number'))\n        .map(item => <ListItem item={item} idx={list.items.indexOf(item) + 1} />)\n    }\n    </ul>\n    <div className='more'>\n      <span>{list.min + 1} - {list.max} ({list.items.length}) &nbsp;</span>\n      {list.items && list.max < list.items.length && <a onclick={() => app.run('more')}> |&nbsp; More ...</a>}\n    </div>\n  </div>;\n}\n\nconst view = state => {\n  const style = (type) => ({ 'font-weight': type === state.type ? 'bold' : 'normal' });\n  return <div className={`hn ${state.type}`}>\n    <div className='header'>\n      <div className='inner'>\n        <div style={{ 'float': 'left' }}>\n          <span style={{ 'margin-right': '20px' }}>\n            <a href='#'>AppRun&#10084;&nbsp;HN</a>\n          </span>\n          <a style={style('top')} href={`#/top`}>Top</a> |&nbsp;\n          <a style={style('new')} href={`#/new`}>New</a> |&nbsp;\n          <a style={style('best')} href={`#/best`}>Best</a> |&nbsp;\n          <a style={style('show')} href={`#/show`}>Show</a> |&nbsp;\n          <a style={style('ask')} href={`#/ask`}>Ask</a> |&nbsp;\n          <a style={style('job')} href={`#/job`}>Jobs</a>\n        </div>\n      </div>\n    </div>\n    <div className='main'>\n      <div className='inner'>\n        {state.type === 'item' ?\n          <Item item={state.item} /> :\n          <List list={state.list} />}\n      </div>\n    </div>\n    <div className='footer'>\n      <div className='inner'>\n        Powered by <a href='https://github.com/yysun/apprun'>AppRun</a>,\n        Source code: <a href='https://github.com/yysun/apprun-hn'>Github.</a>\n      </div>\n    </div>\n  </div>\n}\n\nconst update = {\n  '#': async (state, type = 'top', id) => {\n    state.type = type;\n    state.id = id;\n    if (type === 'item')\n      state.item = await getItem(id);\n    else {\n      state.list = await getList(type, 0, page_size);\n    }\n    return state;\n  },\n  'render': state => state,\n  'more': async state => {\n    state.list = await getList(state.type, state.list.min, state.list.max + page_size);\n    return state;\n  },\n}\n\napp.start(document.body, {}, view, update);\n\ndocument.body.addEventListener('click', e => {\n  const t = e.target as HTMLElement;\n  if (t.matches('.toggle')) {\n    t.classList.toggle('closed');\n    t.nextElementSibling && t.nextElementSibling.classList.toggle('collapsed');\n  }\n});\n\nfunction pluralize(number, label) {\n  if (!number) number = 0;\n  return (number === 1) ? number + label : number + label + 's'\n}\n\nfunction timeAgo(time) {\n  const between = Date.now() / 1000 - Number(time)\n  if (between < 3600) {\n    return pluralize(~~(between / 60), ' minute')\n  } else if (between < 86400) {\n    return pluralize(~~(between / 3600), ' hour')\n  } else {\n    return pluralize(~~(between / 86400), ' day')\n  }\n}\n\n"],"sourceRoot":""}